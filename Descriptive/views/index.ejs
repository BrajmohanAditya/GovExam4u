
<!DOCTYPE html>
<html>
<head>
  <title>Descriptive</title>
  <link rel="stylesheet" href="/style.css">
</head>
<body>
  <div style="margin-left: 1rem;">
    <h2>Descriptive for IBPS & SBI</h2>
    <b style="color: red;">As per the IBPS guidelines, copying and pasting is strictly prohibited.</b>
    <div id="timer" style="font-weight:bold; color:green; margin: 1rem 0;">Time left: 10:00</div>
  </div>

  <form action="/content" method="POST"> <!-- Route 1 per request send karega -->
    <!--submit krna per sara data name="prompt" meh aa gaya or ya route 1 per jo prompt hai woha send kr diya.  -->
    <textarea
      name="prompt"
      rows="15"
      cols="50"
      required
      spellcheck="false"
      onpaste="return false;"
      oncopy="return false;"
      oncut="return false;"
      oncontextmenu="return false;"
    ></textarea>
    <button type="submit">Submit</button>
  </form>

  <div class="box" id="marks-box">
    <h3>Marks: <span><%= marks %></span></h3>
  </div>
  

  <div class="box" id="spelling-box">
    <h3>Spelling Mistakes</h3>
    <pre><%= spellingMistakes %></pre>
  </div>

  <div class="box" id="grammar-box">
    <h3>Grammar Mistakes</h3>
    <pre><%= grammarMistakes %></pre>
  </div>

  <script>
    // Prevent double ENTER
    const textarea = document.querySelector('textarea');
    textarea.addEventListener('input', function () {
      const value = textarea.value;
      if (value.includes('\n\n')) {
        textarea.value = value.replace(/\n\n+/g, '\n');
      }
    });
  
    // Auto submit and countdown timer
    let totalSeconds = 600; // 10 minutes
  
    const timerElement = document.getElementById('timer');
  
    const countdown = setInterval(function () {
      const minutes = String(Math.floor(totalSeconds / 60)).padStart(2, '0');
      const seconds = String(totalSeconds % 60).padStart(2, '0');
      timerElement.textContent = `Time left: ${minutes}:${seconds}`;
      
      totalSeconds--;
  
      if (totalSeconds < 0) {
        clearInterval(countdown);
        document.querySelector('form').submit();
      }
    }, 1000);
  </script> 
</body>
</html>
